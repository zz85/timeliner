<html>
<head>
</head>
<body>
<style>
#box {
	position: absolute;
	width: 50px;
	height: 50px;
	background: red;
}

body {
	overflow: hidden;
	font-family: monospace;
}

</style>

<div id="box"></div>
<script type="module">

import { Timeliner } from './src/timeliner.js'
var target = {
	x: 0,
	y: 0,
	rotate: 0
};

// initialize timeliner
var timeliner = new Timeliner(target);
timeliner.addLayer('x');
timeliner.addLayer('y');
timeliner.addLayer('rotate');

timeliner.load({"version":"1.2.0","modified":"Mon Dec 08 2014 10:41:11 GMT+0800 (SGT)","title":"Untitled","layers":[{"name":"x","values":[{"time":0.1,"value":0,"_color":"#893c0f","tween":"linear"},{"time":3,"value":2.036,"_color":"#9fb080"}],"tmpValue":3.500023,"_color":"#6ee167","_value":0},{"name":"y","values":[{"time":0.1,"value":-2.4070000000000005,"_color":"#d70116","tween":"bounceEaseOut"},{"time":3,"value":0,"_color":"#b61604"}],"tmpValue":-0.5,"_color":"#8bd589","_value":-2.4070000000000005},{"name":"rotate","values":[{"time":0.1,"value":0,"_color":"#567127","tween":"expoEaseIn"},{"time":1.2,"value":1.8766179779329184,"_color":"#1cb730","tween":"expoEaseOut"},{"time":2.2,"value":-2.118382022067082,"_color":"#fce51e","tween":"expoEaseOut"},{"time":2.7,"value":-1.5143820220670818,"_color":"#301c8b","tween":"easeOutBack"},{"time":3,"value":-1.7970000000000002,"_color":"#39be0"}],"tmpValue":-25.700014000000003,"_color":"#2d9f57","_value":0}],"ui":{"currentTime":0.1,"totalTime":20,"scrollTime":0,"timeScale":60}});

timeliner.on('update', data => {
	console.log(data);
})

timeliner.on('keyframe.add', (layer, index, percentage) => {
	console.log(layer, index, percentage);
})

timeliner.on('keyframe.delete', (layer, index) => {
	console.log(layer, index);
})


function animate() {
	requestAnimationFrame(animate);

	var w2 = window.innerWidth / 2;
	var h2 = window.innerHeight / 2;

	box.style.transform = 'translateX(' +  (target.x * 100 + w2) + 'px) translateY(' + (target.y * 100 + h2) + 'px) rotate(' + target.rotate * 50 + 'deg)';
}

animate();


</script>
</body>
</html>